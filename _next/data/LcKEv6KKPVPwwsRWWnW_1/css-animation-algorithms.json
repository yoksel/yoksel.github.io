{"pageProps":{"article":{"title":"CSS-анимации для ротации изображений","slug":"css-animation-algorithms","content":"<p>В процессе экспериментов с <a href=\"/animated-svg-mask/\">анимированными SVG-масками</a>, мне пришлось как следует разобраться с алгоритмами CSS-анимаций. </p>\n<p>Например, в <a href=\"https://codepen.io/yoksel/pen/eIxmr\">этом демо</a> используется две анимации: одна для маски, вторая — для смены изображений. Сейчас речь пойдет о второй (и её вариантах).</p>\n<p>Такая анимация нужна, чтобы последовательно показывать и скрывать картинки, в то время, когда эффект их появления обеспечивается другой анимацией.</p>\n<p>При использовании HTML-элементов это можно было бы сделать одной анимацией, но при использовании SVG-масок для всех элементов ротации используется одна маска, и ей нельзя задать задержку воспроизведения в зависимости от позиции элемента, к которому она применилась. Есть два решения: создавать для каждого шага по маске с нужной задержкой воспроизведения или просто скрывать элементы, которые не нужны в данный момент. Я выбрала второй вариант.</p>\n<p>Мне не хотелось использовать JS, потому что простую анимацию можно сделать средствами CSS. Кроме того, использование переменных в SCSS позволяет легко синхронизировать между собой анимации масок и смены изображений.</p>\n<p>Итак, <b>первый вариант анимации</b>.</p>\n<p><b>Задача:</b> сделать алгоритм последовательной смены произвольного количества изображений. Одно изображение должно сменять другое без плавных переходов. В один момент времени показывается одна картинка.</p>\n<p>Вот как это должно работать:</p>\n<p data-height=\"400\" data-theme-id=\"4974\" data-slug-hash=\"kDpsG\" data-default-tab=\"result\" class='codepen'>See the Pen <a href='https://codepen.io/yoksel/pen/kDpsG/'>kDpsG</a> by yoksel (<a href='https://codepen.io/yoksel'>@yoksel</a>) on <a href='https://codepen.io'>CodePen</a>.</p>\n<script async src=\"//codepen.io/assets/embed/ei.js\"></script>\n\n<p>Делаем разметку галереи:</p>\n<figure aria-label=\"Пример кода\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rotation<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rotation__item<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rotation__item<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rotation__item<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rotation__item<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n</code></pre></figure>\n<p>В демо я добавила картинки фоном, но внутри элементов галереи может быть любое содержимое. Для демонстрации SVG-масок структура галереи переносится, соответственно, в SVG.</p>\n<p>Добавляем SCSS:</p>\n<figure aria-label=\"Пример кода\"><pre class=\"language-css\"><code class=\"language-css\">$<span class=\"token property\">rotation-height</span><span class=\"token punctuation\">:</span> 270px<span class=\"token punctuation\">;</span>\n\n<span class=\"token selector\">.rotation</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> $rotation-height<span class=\"token punctuation\">;</span>\n\n  &amp;amp<span class=\"token punctuation\">;</span>__item <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> $rotation-height<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></figure>\n<p>Теперь самое интересное: анимация. Создаем конфиг:</p>\n<figure aria-label=\"Пример кода\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* количество элементов в галерее */</span>\n$<span class=\"token property\">max</span><span class=\"token punctuation\">:</span> 4<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/* длительность анимации */</span>\n$<span class=\"token property\">duration</span><span class=\"token punctuation\">:</span> 8s<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/* длительность одного шага */</span>\n$<span class=\"token property\">step</span><span class=\"token punctuation\">:</span> $duration/$max<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/* длительность показа одной картинки в процентах от общей длительности анимации */</span>\n$<span class=\"token property\">step-perc</span><span class=\"token punctuation\">:</span> <span class=\"token function\">percentage</span><span class=\"token punctuation\">(</span>1/$max<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></figure>\n<p>Нужно понимать как работает последний параметр. Для всех элементов задается одна и та же анимация: картинка показывается на короткий промежуток времени, и затем скрывается. Переменная <code>$step-perc</code> используется в коде анимации, и определяет как долго будет отображаться каждая картинка:</p>\n<figure aria-label=\"Пример кода\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@keyframes</span> hide</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">0%</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">#</span><span class=\"token punctuation\">{</span>$step-perc<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></figure>\n<p>Например, в галерее из четырех элементов каждая картинка будет показываться 25% времени, а в остальное время будет скрыта.</p>\n<p>Задаем анимацию элементам галереи:</p>\n<figure aria-label=\"Пример кода\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.rotation__item</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">animation</span><span class=\"token punctuation\">:</span> hide $duration step-end infinite<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></figure>\n<p>Элементы исчезают и появляются одновременно, нужно добавить каждому из них задержку воспроизведения:</p>\n<figure aria-label=\"Пример кода\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.rotation__item</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">animation</span><span class=\"token punctuation\">:</span> hide $duration step-end infinite<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">/* задержки анимации */</span>\n  &amp;amp<span class=\"token punctuation\">;</span><span class=\"token punctuation\">:</span><span class=\"token function\">nth-child</span><span class=\"token punctuation\">(</span>#<span class=\"token punctuation\">{</span>$max<span class=\"token punctuation\">}</span><span class=\"token selector\">n + 1)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* ничего не делаем */</span>\n  <span class=\"token punctuation\">}</span>\n  &amp;amp<span class=\"token punctuation\">;</span><span class=\"token punctuation\">:</span><span class=\"token function\">nth-child</span><span class=\"token punctuation\">(</span>#<span class=\"token punctuation\">{</span>$max<span class=\"token punctuation\">}</span><span class=\"token selector\">n + 2)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">animation-delay</span><span class=\"token punctuation\">:</span> $step<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  &amp;amp<span class=\"token punctuation\">;</span><span class=\"token punctuation\">:</span><span class=\"token function\">nth-child</span><span class=\"token punctuation\">(</span>#<span class=\"token punctuation\">{</span>$max<span class=\"token punctuation\">}</span><span class=\"token selector\">n + 3)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">animation-delay</span><span class=\"token punctuation\">:</span> $step*2<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  &amp;amp<span class=\"token punctuation\">;</span><span class=\"token punctuation\">:</span><span class=\"token function\">nth-child</span><span class=\"token punctuation\">(</span>#<span class=\"token punctuation\">{</span>$max<span class=\"token punctuation\">}</span><span class=\"token selector\">n + 4)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">animation-delay</span><span class=\"token punctuation\">:</span> $step*3<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></figure>\n<p>Первому элементу задержка не нужна, для остальных рассчитываем задержку, умножая длительность одного шага на позицию элемента минус 1. То есть второй элемент начнет воспроизводиться на шаг позже, третий — на два шага позже, и так далее.</p>\n<p>Очевидно, что <code>animation-delay</code> будет удобнее рассчитывать в цикле:</p>\n<figure aria-label=\"Пример кода\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.rotation__item</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">animation</span><span class=\"token punctuation\">:</span> hide $duration step-end infinite<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">/* Задержки анимации */</span>\n  <span class=\"token atrule\"><span class=\"token rule\">@for</span> $item from 2 through $max</span> <span class=\"token punctuation\">{</span>\n    &amp;amp<span class=\"token punctuation\">;</span><span class=\"token punctuation\">:</span><span class=\"token function\">nth-child</span><span class=\"token punctuation\">(</span>#<span class=\"token punctuation\">{</span>$max<span class=\"token punctuation\">}</span><span class=\"token selector\">n + #</span><span class=\"token punctuation\">{</span>$item<span class=\"token punctuation\">}</span><span class=\"token selector\">)</span><span class=\"token punctuation\">{</span>\n      <span class=\"token property\">animation-delay</span><span class=\"token punctuation\">:</span> $step*<span class=\"token punctuation\">(</span>$item — 1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n</code></pre></figure>\n<p>Кроме того, так не придется каждый раз дописывать или убирать задержку шагов, если их число изменится.</p>\n<p>Вот что получается в итоге:</p>\n<p data-height=\"400\" data-theme-id=\"4974\" data-slug-hash=\"hzlnj\" data-default-tab=\"result\" class='codepen'>See the Pen <a href='https://codepen.io/yoksel/pen/hzlnj/'>hzlnj</a> by yoksel (<a href='https://codepen.io/yoksel'>@yoksel</a>) on <a href='https://codepen.io'>CodePen</a>.</p>\n<script async src=\"//codepen.io/assets/embed/ei.js\"></script>\n\n<p>Можно отредактировать заготовку, сделав простую ротацию:</p>\n<p data-height=\"400\" data-theme-id=\"4974\" data-slug-hash=\"kpoiq\" data-default-tab=\"result\" class='codepen'>See the Pen <a href='https://codepen.io/yoksel/pen/kpoiq/'>kpoiq</a> by yoksel (<a href='https://codepen.io/yoksel'>@yoksel</a>) on <a href='https://codepen.io'>CodePen</a>.</p>\n<script async src=\"//codepen.io/assets/embed/ei.js\"></script>\n\n<p>А можно добавить спецэффектов с помощью анимированных SVG-масок, например:</p>\n<p data-height=\"400\" data-theme-id=\"4974\" data-slug-hash=\"kJwCb\" data-default-tab=\"result\" class='codepen'>See the Pen <a href='https://codepen.io/yoksel/pen/kJwCb/'>kJwCb</a> by yoksel (<a href='https://codepen.io/yoksel'>@yoksel</a>) on <a href='https://codepen.io'>CodePen</a>.</p>\n<script async src=\"//codepen.io/assets/embed/ei.js\"></script>\n\n<p>Для этого демо структура галереи была перенесена в SVG.</p>\n<p><b>Второй вариант анимации.</b></p>\n<p><b>Задача:</b> картинки появляются по очереди от нижних слоев к верхним, при этом одновременно видны две картинки: текущая и предыдущая под ней, это позволит используя маски сделать &quot;перетекание&quot; из одной картинки в другую.</p>\n<p>Как это должно работать:</p>\n<p data-height=\"400\" data-theme-id=\"4974\" data-slug-hash=\"KrqHC\" data-default-tab=\"result\" class='codepen'>See the Pen <a href='https://codepen.io/yoksel/pen/KrqHC/'>KrqHC</a> by yoksel (<a href='https://codepen.io/yoksel'>@yoksel</a>) on <a href='https://codepen.io'>CodePen</a>.</p>\n<script async src=\"//codepen.io/assets/embed/ei.js\"></script>\n\n<p>Анимация делается по тем же принципам, что и предыдущая, но имеет свои особенности.</p>\n<p>Во-первых, под самым первым слоем тоже должно что-то быть, для этого немного меняем разметку и добавляем &quot;дно&quot;:</p>\n<figure aria-label=\"Пример кода\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dl</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rotation<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dt</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rotation__item--static item--1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dt</span><span class=\"token punctuation\">></span></span> <span class=\"token comment\">&lt;!-- это дно --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dd</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rotation__item item--2<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dd</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dd</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rotation__item item--3<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dd</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dd</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rotation__item item--4<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dd</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dd</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rotation__item item--5<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dd</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dl</span><span class=\"token punctuation\">></span></span>\n</code></pre></figure>\n<p>Оно не участвует в ротации, а просто всегда там лежит. Изображение в этом слое должно быть таким же как в последнем слое, это позволит зациклить анимацию.</p>\n<p>Во-вторых, чтобы каждый слой успевал послужить подложкой для следующего, удлиняем время показа каждого слоя, теперь оно равно двум шагам:</p>\n<figure aria-label=\"Пример кода\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* было */</span>\n$<span class=\"token property\">step-perc</span><span class=\"token punctuation\">:</span> <span class=\"token function\">percentage</span><span class=\"token punctuation\">(</span>1/$max<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/* стало */</span>\n$<span class=\"token property\">step-perc</span><span class=\"token punctuation\">:</span> <span class=\"token function\">percentage</span><span class=\"token punctuation\">(</span>1/$max*2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></figure>\n<p>В течение первого шага слой появляется сам, а в течение второго служит фоном для следующего слоя.</p>\n<p>Во-третьих, самому верхнему слою потребуется своя отдельная анимация.</p>\n<p>Почему?</p>\n<p>Как уже говорилось выше, в этом варианте анимации каждый слой показывается по времени два шага.</p>\n<p>Последний слой изначально тоже показывается два шага, но он самый верхний, и не может служить подложкой другим слоям (над ним ничего нет). Следовательно, его нужно показывать по времени один шаг, а затем скрыть. При этом самый нижний слой является копией верхнего, так что если по прошествии одного шага скрыть самый верхний слой, под ним покажется точно такой же нижний, и анимация аккуратно зациклится.</p>\n<p>Делаем переменную с половинной длительностью анимации:</p>\n<figure aria-label=\"Пример кода\"><pre class=\"language-css\"><code class=\"language-css\">$<span class=\"token property\">half-step-perc</span><span class=\"token punctuation\">:</span> <span class=\"token function\">percentage</span><span class=\"token punctuation\">(</span>1/$max<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></figure>\n<p>Дублируем анимацию с новой длительностью:</p>\n<figure aria-label=\"Пример кода\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@keyframes</span> hide-half-step</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">0%</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">#</span><span class=\"token punctuation\">{</span>$half-step-perc<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></figure>\n<p>Переопределяем анимацию для последнего шага:</p>\n<figure aria-label=\"Пример кода\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.rotation__item</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">animation</span><span class=\"token punctuation\">:</span> hide $duration step-end infinite<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">/* имя анимации для последнего шага */</span>\n  &amp;amp<span class=\"token punctuation\">;</span><span class=\"token punctuation\">:</span><span class=\"token function\">nth-of-type</span><span class=\"token punctuation\">(</span>#<span class=\"token punctuation\">{</span>$max<span class=\"token punctuation\">}</span><span class=\"token selector\">n)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">animation-name</span><span class=\"token punctuation\">:</span> hide-half-step<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">/* задержки анимации */</span>\n  <span class=\"token atrule\"><span class=\"token rule\">@for</span> $item from 2 through $max</span> <span class=\"token punctuation\">{</span>\n    &amp;amp<span class=\"token punctuation\">;</span><span class=\"token punctuation\">:</span><span class=\"token function\">nth-of-type</span><span class=\"token punctuation\">(</span>#<span class=\"token punctuation\">{</span>$max<span class=\"token punctuation\">}</span><span class=\"token selector\">n + #</span><span class=\"token punctuation\">{</span>$item<span class=\"token punctuation\">}</span><span class=\"token selector\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">animation-delay</span><span class=\"token punctuation\">:</span> $step*<span class=\"token punctuation\">(</span>$item — 1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></figure>\n<p>Визуально результат практически не отличается от предыдущего варианта:</p>\n<p data-height=\"400\" data-theme-id=\"4974\" data-slug-hash=\"rJogH\" data-default-tab=\"result\" class='codepen'>See the Pen <a href='https://codepen.io/yoksel/pen/rJogH/'>rJogH</a> by yoksel (<a href='https://codepen.io/yoksel'>@yoksel</a>) on <a href='https://codepen.io'>CodePen</a>.</p>\n<script async src=\"//codepen.io/assets/embed/ei.js\"></script>\n\n<p>Но если к элементам галереи применить SVG-маски, получается интересное:</p>\n<p data-height=\"400\" data-theme-id=\"4974\" data-slug-hash=\"zcmki\" data-default-tab=\"result\" class='codepen'>See the Pen <a href='https://codepen.io/yoksel/pen/zcmki/'>Simple animated mask in SVG (rhomb)</a> by yoksel (<a href='https://codepen.io/yoksel'>@yoksel</a>) on <a href='https://codepen.io'>CodePen</a>.</p>\n<script async src=\"//codepen.io/assets/embed/ei.js\"></script>\n\n<p>Синхронизация слоёных анимаций не самая простая задача, но результат того стоит.</p>\n<p>Уверена, что на основе таких анимаций можно придумать интересные визуальные эффекты, а понимание принципа их работы может сэкономить временя при необходимости сделать что-то подобное.</p>\n","links":[{"href":"/css-animation/","text":"Css Animation"},{"href":"/animated-svg-mask/","text":"Анимированные SVG-маски"}],"tags":["animation"],"navItems":[],"date":"2014-08-11"},"posts":[{"date":"2020-09-26","href":"/css-math","text":"Математические функции в CSS","type":"post"},{"date":"2020-09-24","href":"/adaptive-video-with-css-math","text":"Адаптивное видео с помощью встроенных математических функций CSS","type":"post"},{"date":"2020-08-30","href":"/inaccessibility","text":"Недоступность в картинках","type":"post"},{"date":"2020-08-13","href":"/size-units","text":"Единицы размеров в CSS","type":"post"},{"date":"2020-07-27","href":"/color-themes-generator","text":"Генератор цветовых тем","type":"post"},{"date":"2020-07-25","href":"/jekyll-gatsby","text":"Jekyll → Gatsby","type":"post"},{"date":"2018-06-18","href":"/opentype-variable-fonts","text":"Вариативные шрифты","type":"post"},{"date":"2017-08-15","href":"/svg-sizes","text":"Размеры в SVG","type":"post"},{"date":"2017-01-13","href":"/adaptive-pixel-perfect","text":"Адаптивный Pixel Perfect","type":"post"},{"date":"2016-12-20","href":"/a11y-for-logotypes","text":"Логотип не отвечает или временно недоступен","type":"post"},{"date":"2016-11-23","href":"/svg-patterns","text":"SVG-паттерны","type":"post"},{"date":"2016-08-18","href":"/svg-bubble","text":"Мыльные пузыри на SVG","type":"post"},{"date":"2016-08-11","href":"/svg-gradients","text":"SVG-градиенты","type":"post"},{"date":"2016-02-12","href":"/funny-little-console","text":"Весёлая консолька","type":"post"},{"date":"2016-02-04","href":"/svg-masks","text":"SVG-маски","type":"post"},{"date":"2015-07-06","href":"/scroll-snap","text":"Умная прокрутка со Scroll Snap Points","type":"post"},{"date":"2014-08-11","href":"/css-animation-algorithms","text":"CSS-анимации для ротации изображений","type":"post"},{"date":"2014-08-10","href":"/animated-svg-mask","text":"Анимированные SVG-маски","type":"post"},{"date":"2014-07-26","href":"/svg-stroke","text":"Странности обводки в SVG","type":"post"},{"date":"2014-07-08","href":"/svg-preloaders","text":"SVG-прелоадеры","type":"post"},{"date":"2014-07-04","href":"/animated-gradients-2","text":"Анимируем градиенты ещё раз","type":"post"},{"date":"2014-06-15","href":"/background-blend-mode","text":"Background-blend-mode","type":"post"},{"date":"2014-04-17","href":"/svg-decoration","text":"Возможности оформления SVG","type":"post"},{"date":"2014-04-12","href":"/css-and-svg-masks","text":"CSS и SVG маски","type":"post"},{"date":"2014-04-06","href":"/nth-child","text":"Nth-child и nth-of-type","type":"post"},{"date":"2014-03-29","href":"/svg-icons","text":"SVG-иконки","type":"post"},{"date":"2014-03-27","href":"/svg-fill-and-stroke","text":"SVG: заливка и обводка","type":"post"},{"date":"2014-03-23","href":"/svg-path","text":"SVG-path","type":"post"},{"date":"2014-03-22","href":"/svg-groups-use","text":"SVG: группировка и переиспользование элементов","type":"post"},{"date":"2014-03-21","href":"/svg-shapes","text":"SVG-фигуры и трансформации","type":"post"},{"date":"2014-03-19","href":"/svg","text":"SVG","type":"post"},{"date":"2014-03-04","href":"/3d-and-gradients","text":"СSS-градиенты и 3D","type":"post"},{"date":"2014-02-23","href":"/shadowpainter","text":"Рисовалка анимированных теней","type":"post"},{"date":"2014-02-12","href":"/new-patterns","text":"Свежие CSS-паттерны","type":"post"},{"date":"2014-02-07","href":"/css-patterns","text":"CSS-паттерны","type":"post"},{"date":"2014-02-05","href":"/radial-gradients","text":"Радиальные градиенты","type":"post"},{"date":"2014-02-04","href":"/linear-gradients","text":"Линейные градиенты","type":"post"},{"date":"2014-01-25","href":"/tic-tac-toe","text":"Крестики-нолики на CSS","type":"post"},{"date":"2014-01-22","href":"/border-image","text":"Border-image","type":"post"},{"date":"2014-01-19","href":"/digital-watch","text":"Электронные часы на CSS и JS.","type":"post"},{"date":"2014-01-03","href":"/specifity","text":"Сколько весят селекторы?","type":"post"},{"date":"2014-01-02","href":"/unicode","text":"Символы юникода","type":"post"},{"date":"2013-12-22","href":"/content","text":"Свойство content","type":"post"},{"date":"2013-12-16","href":"/animation-for-gradients","text":"Анимируем CSS-градиенты","type":"post"},{"date":"2013-12-09","href":"/text-effects","text":"Текстовые эффекты","type":"post"},{"date":"2013-11-27","href":"/list-like-tree","text":"Древовидный список на CSS","type":"post"},{"date":"2013-11-20","href":"/css-selectors-part2","text":"Css-селекторы, часть 2","type":"post"},{"date":"2013-11-16","href":"/css-selectors","text":"Css-селекторы","type":"post"},{"date":"2013-10-22","href":"/kontekst-nalozheniya","text":"Контекст наложения","type":"post"},{"date":"2013-10-09","href":"/box-sizing","text":"Box-sizing","type":"post"},{"date":"2013-10-09","href":"/dva-sposoba-proshit-e-lement-po-krayu","text":"Два способа \"прошить\" элемент по краю","type":"post"},{"date":"2013-10-06","href":"/tsveta","text":"Цвета в CSS","type":"post"},{"date":"2013-10-04","href":"/fon-pod-strochkami-dobavlyaem-polya","text":"Фон под строчками: добавляем поля","type":"post"},{"date":"2013-09-29","href":"/box-shadow","text":"Box-shadow","type":"post"},{"date":"2013-09-27","href":"/css-figury-lepestok","text":"Css-фигуры: лепесток","type":"post"},{"date":"2013-09-26","href":"/3d-cube","text":"3D-куб","type":"post"},{"date":"2013-09-26","href":"/css-animation","text":"Css Animation","type":"post"},{"date":"2013-09-26","href":"/transform","text":"Transform","type":"post"},{"date":"2013-09-17","href":"/border-radius","text":"Border-radius","type":"post"},{"date":"2013-09-10","href":"/first-letter","text":"First letter","type":"post"},{"date":"2013-09-06","href":"/css-figury","text":"CSS-фигуры","type":"post"},{"date":"2013-09-06","href":"/eti-glaza-naprotiv","text":"Эти глаза напротив","type":"post"},{"date":"2013-09-04","href":"/strelki-s-pomoshh-yu-svojstva-border","text":"Стрелки с помощью свойства border","type":"post"},{"date":"2013-09-03","href":"/flexbox","text":"Flexbox","type":"post"}],"pages":[{"date":"2014-03-19","type":"page","href":"/pages/svg-links","text":"SVG: полезные ссылки"},{"date":"2013-11-16","type":"page","href":"/pages/css-selectors","text":"CSS-селекторы одной таблицей"},{"date":"2013-10-06","type":"page","href":"/pages/tablitsa-imenovanny-h-tsvetov","text":"Таблица именованных цветов"},{"date":"2013-09-27","type":"page","href":"/pages/transform-functions","text":"Функции Transform"},{"date":"2013-09-26","type":"page","href":"/pages/svojstva-animation","text":"Свойства Animation одной таблицей"},{"date":"2013-09-26","type":"page","href":"/pages/svojstva-transform","text":"Свойства Transform"},{"date":"2013-09-04","type":"page","href":"/pages/razny-j-sintaksis-flexbox","text":"Разный синтаксис Flexbox"},{"date":"2013-09-03","type":"page","href":"/pages/svojstva-flexbox","text":"Свойства Flexbox одной таблицей"}],"prevNext":{"prev":{"date":"2014-08-10","href":"/animated-svg-mask","text":"Анимированные SVG-маски","type":"post","id":"previous"},"next":{"date":"2015-07-06","href":"/scroll-snap","text":"Умная прокрутка со Scroll Snap Points","type":"post","id":"next"}}},"__N_SSG":true}