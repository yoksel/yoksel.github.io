{"componentChunkName":"component---src-templates-blog-post-js","path":"/background-blend-mode","result":{"data":{"markdownRemark":{"html":"<p>На этой неделе в <a href=\"https://developer.mozilla.org/en-US/Firefox/Releases/30\">Firefox 30</a> было включено по умолчанию свойство <code>background-blend-mode</code>. Таким образом, Firefox стал третьим браузером, поддерживающим это свойство (два других — Opera и Chrome). Safari будет поддерживать это свойство в следующей версии, про планы IE мне ничего найти не удалось.</p>\n<!--more-->\n<p><b>Внимание:</b> все демо в посте — действующие примеры без фолбеков. Для просмотра лучше всего воспользоваться последними версиями Chrome, Opera или Firefox.</p>\n<p>Что делает это новое свойство и какие возможности оно нам дает?</p>\n<p><code>background-blend-mode</code> управляет режимами наложения слоев фона, заданного в  CSS.</p>\n<p>Пример:</p>\n<iframe height=\"350\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/gftIl/?&default-tab=result\"\n    ></iframe>\n<p><i>Наведите курсор на картинку, чтобы увидеть исходное изображение.</i></p>\n<p><code>background-blend-mode</code> аналогичен режимам    наложения слоев в фотошопе, и список возможных значений свойства вам, скорее всего, покажется знакомым:</p>\n<ul>\n<li>normal</li>\n<li>multiply</li>\n<li>screen</li>\n<li>overlay</li>\n<li>darken</li>\n<li>lighten</li>\n<li>color-dodge</li>\n<li>color-burn</li>\n<li>hard-light</li>\n<li>soft-light</li>\n<li>difference</li>\n<li>exclusion</li>\n<li>hue</li>\n<li>saturation</li>\n<li>color</li>\n<li>luminosity</li>\n</ul>\n<p>Как это работает?</p>\n<p>Возьмем, к примеру, картинку с котиком и зададим её фоном:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token property\">background</span><span class=\"token punctuation\">:</span> teal <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>http://placekitten.com/250/200<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Для наложения слоев обязательное условие, чтобы слоев было больше одного. В нашем случае первым слоем является цвет (<code>teal</code>).</p>\n<p>Теперь можно добавить режим наложения, например:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token property\">background</span><span class=\"token punctuation\">:</span> teal <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>http://placekitten.com/250/200<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token property\">background-blend-mode</span><span class=\"token punctuation\">:</span> hard-light<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Результат:</p>\n<iframe height=\"620\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/kGAsK/?&default-tab=result\"\n    ></iframe>\n<p>Вы можете поиграться с режимами здесь или посмотреть их списком на одной странице <a href=\"http://codepen.io/yoksel/full/Kirkd/\">вот тут</a>.</p>\n<p>Слоев фона может быть больше двух, и для каждого слоя можно отдельно задавать режим наложения:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token property\">background</span><span class=\"token punctuation\">:</span> teal <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>http://placekitten.com/250/200<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token property\">background-blend-mode</span><span class=\"token punctuation\">:</span> hard-light<span class=\"token punctuation\">,</span> multiply<span class=\"token punctuation\">,</span> normal<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Фоны могут содержать не только изображения, но и градиенты, что позволяет делать разные интересные эффекты:</p>\n<iframe height=\"550\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/mJohl/?&default-tab=result\"\n    ></iframe>\n<p>Как можно использовать <code>background-blend-mode</code>?</p>\n<p>Предположим, есть сайт в определенной цветовой гамме, и в дизайне нужно разместить несколько картинок:</p>\n<iframe height=\"650\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/AyLEs/?&default-tab=result\"\n    ></iframe>\n<p>Так картинки не очень вписываются в цветовую схему. Раньше чтобы тонировать изображения под цвет сайта, потребовалось бы открыть графический редактор и проделать эту операцию с каждой картинкой, но сейчас это можно сделать одной строчкой:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token property\">background-blend-mode</span><span class=\"token punctuation\">:</span> luminosity<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Результат:</p>\n<iframe height=\"650\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/yCHuJ/?&default-tab=result\"\n    ></iframe>\n<p>Способ имеет свои преимущества:</p>\n<ol>\n<li>Экономит время — не нужно вручную красить картинки, используемые в дизайне. Особо пригодятся режимы наложения в прототипировании, когда картинки, скорее всего, ещё будут меняться.</li>\n<li>Позволяет легко сделать эффект, когда при наведении картинка показывается в оригинальном цвете. При этом не нужно готовить два изображения и менять их по наведению курсора — достаточно одного.</li>\n</ol>\n<p>А если потом изменится цветовая схема сайта — не нужно будет заново перекрашивать картинки под новую схему — всё произойдет само собой:</p>\n<iframe height=\"650\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/BuHLE/?&default-tab=result\"\n    ></iframe>\n<p>Правда, мне не удалось сделать плавную смену режимов наложения. Насколько я понимаю, они не анимируются. Но это можно обойти используя псевдоэлементы: через <code>:before</code> создается дублирующий слой с той же картинкой, и ему по наведению меняется прозрачность — это можно сделать плавно (пример справа):</p>\n<iframe height=\"400\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/FCLHx/?&default-tab=result\"\n    ></iframe>\n<p>Ещё один способ покрасить картинку в дизайне — подложить полосатый градиент:</p>\n<iframe height=\"650\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/ngjFd/?&default-tab=result\"\n    ></iframe>\n<p>Приятный бонус <code>background-blend-mode</code> — плавная деградация: если браузер не поддерживает режимы наложения, посетитель увидит обычную картинку. Может быть, она будет не очень вписана в цветовую схему, но это лучше чем ничего.</p>\n<p>Интересно, что в некоторых режимах результат различается в зависимости от того, наложена ли картинка на цвет или цвет поверх картинки (слева картинка поверх цвета, справа наоборот):</p>\n<iframe height=\"550\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/rLygi/?&default-tab=result\"\n    ></iframe>\n<p>Наложение цвета на картинку позволяет получить более интересные результаты, похожие на цветовые фильтры, но этот вариант хуже с точки зрения деградации, потому что если режимы не сработают, на странице отобразится верхний слой — то есть заливка цветом.</p>\n<p>С изображениями всё более-менее понятно, но вот для CSS-градиентов режимы наложения поистине открывают новые горизонты. Теперь слои градиентов могут не просто просвечивать друг под другом в областях полной или частичной прозрачности, но также они могут взаимодействовать с нижележащими слоями, образовуя новые сочетания. Делать такие градиенты безусловно сложнее, но и интереснее тоже.</p>\n<p>Уже есть первая галерея с примерами: <a href=\"http://bennettfeely.com/gradients/\">bennettfeely.com/gradients/</a>. Ниже на странице можно найти JS-фолбек и взвешивание одних и тех же градиентов, сделанных на CSS или в виде изображений различных форматов. CSS, конечно, выигрывает.</p>\n<p>И даже если пока что не все браузеры позволяют использовать <code>background-blend-mode</code>, имеет смысл поинтересоваться какие из используемых вами изображений уже можно заменить CSS-паттернами, чтобы получить выигрыш в весе и производительности.</p>\n<p>Вдохновившись примерами из галереи, я решила посмотреть что ещё можно сделать. Одно из забавных открытий — шахматная доска:</p>\n<iframe height=\"350\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/aKbjw/?&default-tab=result\"\n    ></iframe>\n<p>Без режимов наложения такое клеточки делать немного головоломно (хотя на основе такого градиента можно получить множество других). С режимами клеточки делаются всего из двух градиентов, третий понадобится в случае если клеточки должны быть не черно-белыми, а цветными.</p>\n<p>Правда, паттерн не всегда хорошо поддаётся перекрашиванию, это некоторый недостаток способа. С другой стороны, в этом случае заливкой клеток может быть не только цвет, но и градиент, что в предыдущем способе было бы не очень удобно делать.</p>\n<p>Ещё несколько градиентов:</p>\n<iframe height=\"350\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/HkJtq/?&default-tab=result\"\n    ></iframe>\n<iframe height=\"350\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/IECap/?&default-tab=result\"\n    ></iframe>\n<iframe height=\"350\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/DGKvA/?&default-tab=result\"\n    ></iframe>\n<iframe height=\"350\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/eglhn/?&default-tab=result\"\n    ></iframe>\n<iframe height=\"350\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/aoikj/?&default-tab=result\"\n    ></iframe>\n<iframe height=\"350\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/sejrl/?&default-tab=result\"\n    ></iframe>\n<iframe height=\"350\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/LvIrj/?&default-tab=result\"\n    ></iframe>\n<iframe height=\"350\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/cflrn/?&default-tab=result\"\n    ></iframe>\n<iframe height=\"350\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/vbwKF/?&default-tab=result\"\n    ></iframe>\n<iframe height=\"350\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/xitbD/?&default-tab=result\"\n    ></iframe>\n<iframe height=\"350\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/fDpwL/?&default-tab=result\"\n    ></iframe>\n<iframe height=\"350\"\n      style=\"width: 100%\"\n      title=\"no title\"\n      src=\"http://codepen.io/yoksel/embed/wCeDt/?&default-tab=result\"\n    ></iframe>\n<p>Можете отредактировать любой из них отключив режимы наложения и посмотреть что меняется (а также увидеть как выглядят паттерны в бразуерах без поддержки свойства), можете попробовать менять режимы местами, вписывать свои значения или менять цвет фона. Иногда в процессе таких экспериментов из одного паттерна получается ещё несколько.</p>\n<p><code>background-blend-mode</code> выглядит очень привлекательно, позволяя добавить немного магии фотошопа в привычный CSS.</p>","frontmatter":{"title":"Background-blend-mode","desc":"Режимы смешивания в Firefox 30 или новые приключения CSS-градиентов.","image":"http://img-fotki.yandex.ru/get/6728/5091629.a0/0_83425_21180cd2_orig.png","customCSS":null,"customJs":null,"tags":["blend-modes","patterns"],"layout":null,"links":[{"desc":null,"name":"The background-blend-mode property","url":"http://www.w3.org/TR/2014/CR-compositing-1-20140220/#background-blend-mode"},{"desc":null,"name":"Background blending now available in Firefox 30","url":"http://blogs.adobe.com/webplatform/2014/06/12/background-blending-now-available-in-firefox-30/"},{"desc":null,"name":"Gradients gallery","url":"http://bennettfeely.com/gradients/"},{"desc":null,"name":"Getting to know CSS Blend Modes","url":"http://dev.opera.com/articles/getting-to-know-css-blend-modes/"},{"desc":null,"name":"CSS-паттерны","url":"/css-patterns/"},{"desc":null,"name":"Свежие CSS-паттерны","url":"/new-patterns/"},{"desc":null,"name":"СSS-градиенты и 3D","url":"/3d-and-gradients/"},{"desc":null,"name":"Секреты режимов наложения","url":"http://prgssr.ru/development/sekrety-rezhimov-nalozheniya.html"},{"desc":null,"name":"CSS Image Effects","url":"http://una.im/vintage-washout/"}]}}},"pageContext":{"slug":"background-blend-mode","date":"15/06/2014","url":"/background-blend-mode","type":"post","includeContent":"","isArchived":false,"previous":{"frontmatter":{"title":"Возможности оформления SVG"},"fields":{"url":"/svg-decoration","type":"post","isArchived":false}},"next":{"frontmatter":{"title":"Анимируем градиенты ещё раз"},"fields":{"url":"/animated-gradients-2","type":"post","isArchived":false}}}}}